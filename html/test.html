<!DOCTYPE html>
<html>
        <head> 
          
                <!-- <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
                <script id="microloader" type="text/javascript" src=".sencha/app/microloader/development.js"></script> -->

                <!--bootStrap StyleSheet-->
                <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
          
                <!-- my StyleSheet-->
                <link rel="stylesheet" href="../style/NBLStyle.css">
        
                <!--scripts for bootstrap-->
                <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
                <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
                 
                <!-- <script src="../scripts/test.js"></script>         --> 
                
           </head>
            <body>
              
              
               
                  <!--Google Map-->
                
      <p>Total Distance: <span id="total"></span></p>
      
      <p>Total Distance: <span id="speed"></span></p>

      <p>Total Distance: <span id="time"></span></p>
    <div id="floating-panel">
        <strong>Start:</strong>
        <select id="start">
          <option value="csula golden Eagle building">csula</option>
          <option value="st louis, mo">St Louis</option>
          <option value="joplin, mo">Joplin, MO</option>
          <option value="oklahoma city, ok">Oklahoma City</option>
          <option value="amarillo, tx">Amarillo</option>
          <option value="gallup, nm">Gallup, NM</option>
          <option value="flagstaff, az">Flagstaff, AZ</option>
          <option value="winona, az">Winona</option>
          <option value="kingman, az">Kingman</option>
          <option value="barstow, ca">Barstow</option>
          <option value="san bernardino, ca">San Bernardino</option>
          <option value="3150 glenhurst ave, los angeles, ca 90039">house1</option>
        </select>
        <br>
        <strong>End:</strong>
        <select id="end">
          <option value="st louis, mo">St Louis</option>
          <option value="CSULA Salazar Hall">ch</option>
          <option value="Alliance Marc & Eva Stem Math and Science School">Joplin, MO</option>
          <option value="oklahoma city, ok">Oklahoma City</option>
          <option value="amarillo, tx">Amarillo</option>
          <option value="gallup, nm">Gallup, NM</option>
          <option value="flagstaff, az">Flagstaff, AZ</option>
          <option value="winona, az">Winona</option>
          <option value="kingman, az">Kingman</option>
          <option value="barstow, ca">Barstow</option>
          <option value="san bernardino, ca">San Bernardino</option>
          <option value="5151 Elizabeth St., Cudahy, ca 90201">jose</option>
        </select>
      </div>
      <div id="right-panel"></div>
      <div id="map"></div>
      <script>
        function initMap() {
          var directionsDisplay = new google.maps.DirectionsRenderer;
          var directionsService = new google.maps.DirectionsService;
          var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 7,
            center: {lat: 41.85, lng: -87.65}
          });
          directionsDisplay.setMap(map);
          directionsDisplay.setPanel(document.getElementById('right-panel'));
  
          var control = document.getElementById('floating-panel');
          control.style.display = 'block';
          map.controls[google.maps.ControlPosition.TOP_CENTER].push(control);
  
          var onChangeHandler = function() {
            calculateAndDisplayRoute(directionsService, directionsDisplay);
          };
          document.getElementById('start').addEventListener('change', onChangeHandler);
          document.getElementById('end').addEventListener('change', onChangeHandler);

          directionsDisplay.addListener('directions_changed', function() {
    computeTotalDistance(directionsDisplay.getDirections());
  });
        }
  
        function calculateAndDisplayRoute(directionsService, directionsDisplay) {
          var start = document.getElementById('start').value;
          var end = document.getElementById('end').value;
          directionsService.route({
            origin: start,
            destination: end,
            travelMode: 'WALKING'
          }, function(response, status) {
            if (status === 'OK') {
              directionsDisplay.setDirections(response);
            } else {
              window.alert('Directions request failed due to ' + status);
            }
          });
        }
        function computeTotalDistance(result) {
        var total = 0;
        var myroute = result.routes[0];
        for (var i = 0; i < myroute.legs.length; i++) {
          total += myroute.legs[i].distance.value;
        }
        var dis = (total/1000)*(0.621371/1);
        document.getElementById('total').innerHTML = dis + ' mi';
        
        var spe =1.45;//*(1/60)*(1/60);//dis *(1/60)*(1/60);
        document.getElementById('speed').innerHTML = spe + ' speed';
      
        var tim =(total/spe)/60;
        document.getElementById('time').innerHTML = tim + ' time';
      
      }
      </script>
          <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCNfBiDOrPORbsDXWQzBEHImd24G16SWPs&libraries=places&callback=initMap"
          async defer></script>
          </script>
            </body></html>